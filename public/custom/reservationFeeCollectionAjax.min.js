$(document).ready(function(){function t(){title="Successfully placed reservation and generated receipt.",$.notify(title,"success",{timer:1e3})}xhrPool=[],$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}});var e=$("#myTable").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columns:[{data:"regi_code"},{data:"tenant_description"},{data:"business_type_description"},{data:"regi_count"},{data:"action"}]});$(this).on("click","#btnReserve",function(t){id=$(this).val(),content="",$.get(url+"/"+id,function(t){content="<table class='table table-hover dataTable'><thead><tr><th class='align-center'>Unit</th><th class='align-center'>Area</th><th class='align-center'>Price</th> </tr></thead><tbody>",$.each(t[1],function(t,e){content+="<tr><td>"+e.code+"</td> <td>"+e.size+" sqm</td> <td> "+e.price+"</td></tr>"}),content+="</tbody></table>",content+="<table class='table table-hover dataTable'><thead><tr><th class='align-center'>Particular</th><th class='align-center'>Amount</th></tr></thead><tbody>",content+="<tr><td class='align-center'>Base Rent</td> <td class='align-center'>"+t[2].fee+"</td></tr> <tr><td class='align-center'>+"+t[6].vat_rate+" vat</td>",content+="<td class='align-center'>"+t[4]+"</td></tr>",content+="<tr class='align-center'><td>Sub-total</td><td>"+t[5]+"</td></tr>",content+="<tr><td class='align-center'>- "+t[6].ewt_rate+" Expanded Witholding Tax</td><td class='align-center'>"+t[3]+"</td></tr>",content+="<tr><td class='align-center'>Net Rent</td><td class='align-center'>"+t[7]+"</td></tr></tbody></table>",content+="Reservation fee(Net Rent * "+t[2].month+" month(s)): "+t[0],$("#divRes").append(content),$("#myId").val(id),$("#modalReserve").modal("show")})}),$("#btnSave").on("click",function(n){if($("#frmReserve").parsley().isValid()){n.preventDefault();var a=url,r=$("#frmReserve").serialize();console.log(r),$.ajax({beforeSend:function(t,e){xhrPool.push(t)},type:"POST",url:a,data:r,success:function(n){console.log(n),e.draw(),t(),$("#modalReserve").modal("hide")},error:function(t){console.log("Error:",t.responseText)}})}}),$(document).on("hidden.bs.modal","#modalReserve",function(){$("#divRes").empty()})});